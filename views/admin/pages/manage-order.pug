extends ../layouts/default.pug 
include ../mixins/checkbox.pug


block main
  if(pers.includes("order-view"))
    h1.box-title Quản lý đơn hàng 
    //-section-4
    .section-4 
      .inner-wrap
        .inner-item.inner-label 
          <i class="fa-solid fa-filter"></i> Bộ lọc
        .inner-item
          select(filter-status)
            option(value="") Trạng thái 
            option(value="initial") Khởi tạo 
            option(value="confirm") Xác nhận 
            option(value="done") Hoàn thành
            option(value="cancel") Hủy
        .inner-item.inner-date
          input(type="date" filter-start-date)
          span - 
          input(type="date" filter-end-date)
        .inner-item
          select(filter-payment-method)
            option(value="") Phương thức thanh toán
            each item in paymentMethodList
              option(value=item.value) #{item.label}
        .inner-item
          select(filter-payment-status)
            option(value="") Trạng thái thanh toán
            each item in paymentStatusList
              option(value=item.value) #{item.label}
        .inner-item.inner-reset(filter-reset)
          <i class="fa-solid fa-rotate-left"></i> Xóa bộ lọc
    //-Section-4

  
    .section-5 
      .inner-wrap
        .inner-change-status(change-multi data-api = `/${pathAdmin}/orders/change-multi`)
          .inner-item
            select
              option(value="") -- Hành động --
              option(value="confirm") Xác nhận
              option(value="cancel") Hủy
              option(value="done") Hoàn thành
              option(value="remove") Xóa
          button.inner-button Áp dụng


    //-Section-6
    .section-6
      .table-2
        table
          thead
            tr
              th.text-left
                +checkbox-30("checkAll","checkAll")
              th.text-left Mã
              th.text-left Thông tin khách
              th.text-left Danh sách sách
              th.text-left Thanh toán
              th.text-left Trạng thái
              th.text-center Ngày đặt
              th.text-left Hành động
          tbody
            each item in orderList
              tr
                td.text-left 
                  +checkbox-30("checkItem","checkItem",item.id)
                td.text-left 
                  .text-primary #{item.code}
                td.text-left
                  div Họ tên: #{item.fullName}
                  div SĐT: #{item.phone}
                  div Ghi chú: #{item.note}
                td.text-left
                  .book-list 
                    each book in item.items
                      .book-item
                        img(src=book.avatar, alt="" class="inner-image")
                        .inner-content
                          .inner-name #{book.name}
                td.text-left
                  div Tổng tiền: #{item.total.toLocaleString("vi-VN")}đ
                  div PTTT: #{item.paymentMethodName}
                  div TTTT: #{item.paymentStatusName}
                td.text-left
                  span(class=`tag ${item.statusClass}`) #{item.statusName}
                td.text-center
                  div #{item.fullName}
                  div #{item.createdAtFormat}
                td.text-left 
                  .box-actions
                    a(href=`/${pathAdmin}/orders/edit/${item.id}` class="inner-edit")
                      <i class="fa-solid fa-pen-to-square"></i> 
                    a(href="javascript:;" class="inner-remove" buttonRemove data-api=`/${pathAdmin}/orders/remove/${item.id}`)
                      i(class="fa-solid fa-trash-can")   
    //-Section-6

    
    .section-7
      span.inner-label Hiển thị #{pagination.skip +1 } - #{pagination.skip + orderList.length} của #{pagination.totalRecord} 
      select(class="inner-pagination" box-pagination)
        - for (let i = 1; i <= pagination.totalPage; i++)
          option(value=i) Trang #{i}
    //-Section-7



  