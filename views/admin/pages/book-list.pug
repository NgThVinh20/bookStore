extends ../layouts/default.pug 
include ../mixins/checkbox.pug
include ../mixins/options.pug

block main
  if(pers.includes("book-view"))
    h1.box-title Quản lý Sách
    //-section-4 
    .section-4 
      .inner-wrap
        .inner-item.inner-label 
          <i class="fa-solid fa-filter"></i> Bộ lọc
        .inner-item
          select(filter-status)
            option(value="") Trạng thái 
            option(value="active") Hoạt động 
            option(value="inactive") Tạm dừng
        .inner-item
          select(filter-created-by)
            option(value="") Người Tạo
            each item in accountAdminList
              option(value=item.id) #{item.fullname}
        .inner-item.inner-date
          input(type="date" filter-start-date)
          span - 
          input(type="date" filter-end-date)
        .inner-item
          select(filter-category)
            option(value="") Danh mục
            if(categoryList)
              +options(categoryList)
        .inner-item.inner-reset(filter-reset)
          <i class="fa-solid fa-rotate-left"></i> Xóa bộ lọc
    //-Section-4

    //-Section-5
    .section-5 
      .inner-wrap
        .inner-change-status(change-multi data-api=`/${pathAdmin}/books/change-multi`)
          .inner-item
            select
              option(value="") -- Hành động --
              option(value="active") Hoạt động
              option(value="inactive") Tạm dừng 
              option(value="delete") Xóa
          button.inner-button Áp dụng
        .inner-search
          <i class="fa-solid fa-magnifying-glass"></i>
          input(type="text" placeholder="Tìm kiếm" search)
        .inner-button-create
          a(href= `/${pathAdmin}/books/create`)  + Tạo mới
        .inner-button-trash
          a(href=`/${pathAdmin}/books/trash`)  Thùng rác
    //-Section-5

    //-Section-6
    .section-6
      .table-2
        table
          thead
            tr
              th.text-left
                +checkbox-30("checkAll","checkAll")
              th.text-center Tên sách
              th.text-center Ảnh đại diện
              th.text-center Giá
              th.text-center Trạng thái
              th.text-left Tạo bởi
              th.text-left Cập nhật bởi
              th.text-left Hành động
          tbody
            each item in bookList
              tr
                td.text-left 
                  +checkbox-30("checkItem","checkItem",item.id)
                td.text-center #{item.name}
                td.text-center
                  img(src=item.avatar, alt="")
                td.text-center
                  div #{item.priceNew}
                td.text-center 
                  if(item.status=="active")
                    .tag.tag-green Hoạt động
                  else if(item.status=="inactive")
                    .tag.tag-red Tạm dừng
                td.text-left
                  if(item.createdByFullname)
                    div #{item.createdByFullname}
                    div #{item.createdAtFormat}
                td.text-left
                  if(item.updatedByFullname)
                    div #{item.updatedByFullname}
                    div #{item.updatedAtFormat}
                td.text-left 
                  .box-actions
                    a(href=`/${pathAdmin}/books/edit/${item.id}` class="inner-edit")
                      <i class="fa-solid fa-pen-to-square"></i> 
                    a(href="javascript:;" class="inner-remove" buttonDelete data-api=`/${pathAdmin}/books/delete/${item.id}`)
                      <i class="fa-solid fa-trash-can"></i>          
    //-Section-6

    //-Section-7
    .section-7
      span.inner-label Hiển thị #{pagination.skip +1 } - #{pagination.skip + bookList.length} của #{pagination.totalRecord} 
      select(class="inner-pagination" box-pagination)
        - for (let i = 1; i <= pagination.totalPage; i++)
          option(value=i) Trang #{i}
  //-Section-7       



     